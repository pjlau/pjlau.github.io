<!DOCTYPE HTML>
<!--
	Future Imperfect by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
<script src='https://d3js.org/d3.v5.min.js'></script>
<style> circle {fill: lightblue; stroke: black;} </style>
<body onload='init()'>
<svg width=300 height=300>
</svg>
<script>
async function init() {
// Load CSV data
  d3.csv("https://flunky.github.io/cars2017.csv").then(function(data) {

    // Define margins and chart dimensions
    const margin = { top: 50, right: 50, bottom: 50, left: 50 };
    const width = 300 - margin.left - margin.right;
    const height = 300 - margin.top - margin.bottom;

    // Create SVG element
    const svg = d3.select("svg");

    // Define scales
    const xScale = d3.scaleLog([10, 150],[0, width]);
    const yScale = d3.scaleLog([10, 150],[height, 0]);

    // Define axes
    const xAxis = d3.axisBottom(xScale)
      .tickValues([10, 20, 50, 100])
      .tickFormat(d3.format("~s"));

    const yAxis = d3.axisLeft(yScale)
      .tickValues([10, 20, 50, 100])
      .tickFormat(d3.format("~s"));

    
    
    const g = svg.append("g")
                    .attr("transform", "translate(50,50)"); 
    

    // Define circles based on data
    const circles = g.selectAll("circle")
      .data(data)
      .enter()
      .append("circle")
      .attr("cx", d => xScale(d["AverageCityMPG"]))
      .attr("cy", d => yScale(d["AverageHighwayMPG"]))
      .attr("r", d => 2 + Number(d["EngineCylinders"]));
    
    svg.append("g")
      .attr("transform", "translate(" + margin.left + "," + margin.top + ")")
      .call(yAxis); 
    const xheight = height + margin.top;
    
    svg.append("g")
     .attr("transform", "translate(" + margin.left + "," + xheight + ")")
      .call(xAxis);
 
   
    
    
  });


}
</script>
</body>
</html>
