<!DOCTYPE HTML>
<!--
	Future Imperfect by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
<script src='https://d3js.org/d3.v5.min.js'></script>
<style> 
	circle {fill: lightblue; stroke: black;} 

/* Set height of body and the document to 100% to enable "full page tabs" */
body, html {
  height: 100%;
  margin: 0;
  font-family: Arial;
}

/* Style tab links */
.tablink {
  background-color: #555;
  color: white;
  float: left;
  border: none;
  outline: none;
  cursor: pointer;
  padding: 14px 16px;
  font-size: 17px;
  width: 25%;
}

.tablink:hover {
  background-color: #777;
}

/* Style the tab content (and add height:100% for full page content) */

/*
.tabcontent {
  color: white;
  display: none;
  padding: 100px 20px;
  height: 100%;
}
*/
	
#Home {background-color: red;}
#News {background-color: green;}
#Contact {background-color: blue;}
#About {background-color: orange;}


</style>
<body onload='init()'>
<svg width=600 height=600>
</svg>
	
<button class="tablink" onclick="openPage('Home', this, 'red')">Home</button>
<button class="tablink" onclick="openPage('News', this, 'green')" id="defaultOpen">News</button>
<button class="tablink" onclick="openPage('Contact', this, 'blue')">Contact</button>
<button class="tablink" onclick="openPage('About', this, 'orange')">About</button>

<div id="Home" class="tabcontent">
  <h3>Home</h3>
  <p>Home is where the heart is..</p>
</div>

<div id="News" class="tabcontent">
  <h3>News</h3>
  <p>Some news this fine day!</p>
</div>

<div id="Contact" class="tabcontent">
  <h3>Contact</h3>
  <p>Get in touch, or swing by for a cup of coffee.</p>
</div>

<div id="About" class="tabcontent">
  <h3>About</h3>
  <p>Who we are and what we do.</p>
</div>
	
<script>
async function init() {

}

function openPage(pageName, elmnt, color) {
  // Hide all elements with class="tabcontent" by default */
  var i, tabcontent, tablinks;
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }

  // Remove the background color of all tablinks/buttons
  tablinks = document.getElementsByClassName("tablink");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].style.backgroundColor = "";
  }

  // Show the specific tab content
  document.getElementById(pageName).style.display = "block";

  // Add the specific color to the button used to open the tab content
  elmnt.style.backgroundColor = color;

  if (pageName == "Home"){
	  // Load CSV data
  d3.csv("https://flunky.github.io/cars2017.csv").then(function(data) {

    // Get the "Home" tab content element
    const homeContent = document.getElementById("Home");

    // Clear any existing content within the "Home" tab
    homeContent.innerHTML = ""; // Removes all child elements
    
    // Define margins and chart dimensions
    const margin = { top: 50, right: 50, bottom: 50, left: 50 };
    const width = 300 - margin.left - margin.right;
    const height = 300 - margin.top - margin.bottom;

    // Create SVG element
    const svg = d3.select("svg");

    // Define scales
    const xScale = d3.scaleLog([10, 150],[0, width]);
    const yScale = d3.scaleLog([10, 150],[height, 0]);

    // Define axes
    const xAxis = d3.axisBottom(xScale)
      .tickValues([10, 20, 50, 100])
      .tickFormat(d3.format("~s"));

    const yAxis = d3.axisLeft(yScale)
      .tickValues([10, 20, 50, 100])
      .tickFormat(d3.format("~s"));

    
    
    const g = svg.append("g")
                    .attr("transform", "translate(50,50)"); 
    

    // Define circles based on data
    const circles = g.selectAll("circle")
      .data(data)
      .enter()
      .append("circle")
      .attr("cx", d => xScale(d["AverageCityMPG"]))
      .attr("cy", d => yScale(d["AverageHighwayMPG"]))
      .attr("r", d => 2 + Number(d["EngineCylinders"]));
    
    svg.append("g")
      .attr("transform", "translate(" + margin.left + "," + margin.top + ")")
      .call(yAxis); 
    const xheight = height + margin.top;
    
    svg.append("g")
     .attr("transform", "translate(" + margin.left + "," + xheight + ")")
      .call(xAxis);
 
   
    
    
  });
  }
  else if (pageName == "News"){

  // Get the "Home" tab content element
  const newsContent = document.getElementById("News");

  // Clear any existing content within the "Home" tab
  newsContent.innerHTML = ""; // Removes all child elements

var data = [4,8,15,16,23,42];
var color = ['pink','lightyellow','lightgreen','lightcyan','lightblue','violet'];
var pie = d3.pie();
var arc = d3.arc().innerRadius(0).outerRadius(100);

    // Define the SVG element
    var svg = d3.select("svg");

    // Define the pie chart layout
    var pie = d3.pie();

    // Define the arc generator (adjusted for inner radius)
    var arc = d3.arc()
      .innerRadius(0)
      .outerRadius(100);

    // Create pie chart data based on input data
    var pieData = pie(data);

    // Create a group element to hold pie chart slices
    var pieGroup = svg.append("g")
      .attr("transform", "translate(450,150)");  // Center the pie chart

    // Bind data to pie chart slices and create paths
    pieGroup.selectAll("path")
      .data(pieData)
      .enter()
      .append("path")
        .attr("d", arc)  // Use arc generator to define path
        .attr("fill", function(d, i) { return color[i]; })  // Set color based on color array



	  
  }
  else {
    // Show the pre-specified content for other tabs
    document.getElementById(pageName).style.display = "block";
  }

}

// Get the element with id="defaultOpen" and click on it
// document.getElementById("defaultOpen").click();
	
</script>
</body>
</html>
